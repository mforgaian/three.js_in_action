<html>

<head>
    <title>5 - Display Text Geometry</title>
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/109/three.min.js"></script> -->
    <script src="three.min.js"></script>
</head>

<body>
    <script>
        let scene, camera, renderer, text;
        STEP = 0.06

        let createTextGeometry = () => {
            let loader = new THREE.FontLoader();
            loader.load('fonts/font-sample.json', function (font) {
                let titles = "99 bottles of beer on the wall,\n99 bottles of beer.\nTake one down, pass it around,\n98 bottles of beer on the wall,\n98 bottles of beer.\nTake one down, pass it around,\n97 bottles of beer on the wall,\n97 bottles of beer.\nTake one down, pass it around,\n96 bottles of beer on the wall,\n96 bottles of beer.\nTake one down, pass it around,\n95 bottles of beer on the wall,\n95 bottles of beer.";

                var textGeo = new THREE.TextGeometry(titles, {
                    font: font,
                    size: 3,
                    height: 0.1
                });
                var textMaterial = new THREE.MeshBasicMaterial({ color: 0xffffff });
                this.text = new THREE.Mesh(textGeo, textMaterial);
                this.text.position.x = -25;
                this.text.rotation.x = -0.9;
                scene.add(this.text);
            });
        };

        let showAxisHelper = () => {
            let axisHelper = new THREE.AxisHelper()
            scene.add(axisHelper)
        }

        // set up the environment - 
        // initiallize scene, camera, objects and renderer
        let init = function () {
            // create the scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xa10b00);
            // play with changing background here
            // create an locate the camera

            camera = new THREE.PerspectiveCamera(70,
                window.innerWidth / window.innerHeight,
                1, 1500);
            // camera.position.z = 1000;
            // camera.position.x = 500;
            camera.position.set(0, 5, 40);
            createTextGeometry()
            // create the renderer   
            renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

        };


        // main animation loop - calls every 50-60 ms
        let render = function () {
            if (this.text) {
                this.text.position.z -= STEP;
                this.text.position.y += STEP / 2;
            }
            // text.rotation.y += STEP
            renderer.render(scene, camera);
            // RAF
            requestAnimationFrame(render);
        };

        init();
        render();
    </script>

</body>

</html>